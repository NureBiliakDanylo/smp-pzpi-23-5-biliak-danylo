Харківський національний університет радіоелектроніки
Факультет комп’ютерних наук
Катедра програмної інженерії

ЗВІТ
з лабораторної роботи №3
з дисципліни «Скриптові мови програмування»

Виконав
ст. гр. ПЗПІ-23-5
Біляк Данило

Перевірив
ст. викладач катедри ПІ
Сокорчук Ігор Петрович

Харків 2025


1 ІСТОРІЯ ЗМІН
№	Дата	Версія звіту	Опис змін та виправлень
1	22.05.2025	0.1	Створено розділ «Завдання», «Опис виконаної роботи» та «Висновки»


2 ЗАВДАННЯ
Використовуючи матеріал попередніх лабораторних робіт, потрібно додати такий функціонал: 
1. Прибрати дублювання шапки і підвалу сайту (якщо воно є). 
2. Додати сторінку логіна. Обмежити доступ до сайту не залогіненим користувачам. 
3. Додати сторінку профілю з можливістю завантажити фото


3 ОПИС ВИКОНАНОЇ РОБОТИ
Для того щоб виконати перший пункт, потрібно скопіювати меню навігації та підвал у окремі файли, після чого імпортувати їх у файли за допомогою таких строк коду:
1 <?php include 'menu.php'; ?>
2 <?php include 'footer.php'; ?>

Для реалізації реєстрації, входу у систему та редагування профілю користувача потрібно змінити скрипт ініціалізації бази даних з лабораторної роботи номер 3, додавши таблицю для користувачів, тепер файл буде мати такий вигляд:
1  <?php
2  $db = new PDO('sqlite:database.sqlite');
3  $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
4  $db->exec("CREATE TABLE IF NOT EXISTS products (
5      id INTEGER PRIMARY KEY AUTOINCREMENT,
6      name TEXT,
7      price REAL
8  )");
9  
10 $db->exec("CREATE TABLE IF NOT EXISTS users (
11     id INTEGER PRIMARY KEY AUTOINCREMENT,
12     username TEXT UNIQUE NOT NULL,
13     password TEXT NOT NULL,
14     first_name TEXT,
15     last_name TEXT,
16     birthdate TEXT,
17     description TEXT,
18     avatar TEXT
19 )");
20 
21 $db->exec("INSERT INTO products (name, price) VALUES
22     ('Молоко', 35.50),
23     ('Хліб', 20.00),
24     ('Сир', 90.00)
25 ");
26 
27 echo "Базу даних створено.";
28 ?>

Тепер можна створити сторінку логіну (рис. 1) та заглушку для сторінок (рис. 2), яка буде відображатись до того, як користувач ввійде у свій акаунт. На сторінці входу буде запропоновано ввести логін та пароль, або зареєструвати новий акаунт.

Для реалізації заглушок на кожній сторінці існує механізм, який перевіряє вхід користувача та в залежності від результату перевірки видає або цільову сторінку, або “заглушку”. Далі наводиться приклад коду з сторінки товарів:
13 $user = null;
14 if (isset($_SESSION['user'])) {
15     $user_id = $_SESSION['user'];
16     $stmt = $db->prepare("SELECT * FROM users WHERE id = ?");
17     $stmt->execute([$user_id]);
18     $user = $stmt->fetch(PDO::FETCH_ASSOC);
19 } 

34 <div class="container">
35     <?php if (!$user): ?>
36         <div class="auth-warning">
37             Будь ласка, <a href="login.php">увійдіть</a> або <a href="register.php">зареєструйтесь</a> для користування сайтом.
38         </div>
39     <?php else: ?>
40         <main>
41             <?php foreach ($products as $product): ?>
42                 <form method="POST">
43                     <h3><?= htmlspecialchars($product['name']) ?> — <?= $product['price'] ?> грн</h3>
44                     <input type="hidden" name="id" value="<?= $product['id'] ?>">
45                     Кількість: <input type="number" name="quantity" value="1" min="1">
46                     <button type="submit">Купити</button>
47                 </form>
48                 <hr>
49             <?php endforeach; ?>
50             <a href="cart.php">Перейти до кошика</a>
51         </main>
52     <?php endif; ?>
53 </div>

Після входу користувачу стане доступна сторінка профілю (рис. 3), де можна заповнити чи змінити інформацію про користувача, у тому числі і фото профілю, що завантажиться на сервер та збережеться.


4 ВИСНОВКИ
Протягом цієї лабораторної роботи ми поглибили свої навички створення веб-сторінок за допомогою HTML, PHP та CSS, продовжили працювати з базою даних SQLite та використали ці знання для покращення веб-сайту магазину.
